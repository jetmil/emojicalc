<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор синтеза эмоций | Плутчик</title>
    <style>
        :root {
            /* Новая пастельная палитра */
            --bg-primary: linear-gradient(135deg, #ffeef8 0%, #e8f4ff 50%, #f0e7ff 100%);
            --bg-secondary: rgba(255, 255, 255, 0.7);
            --bg-card: rgba(255, 255, 255, 0.5);
            --text-primary: #2d1b4e;
            --text-secondary: #6b5b7a;
            --accent: #d946ef;
            --accent-hover: #c026d3;
            --accent-light: #f0abfc;
            --joy: #fbbf24;
            --trust: #34d399;
            --fear: #818cf8;
            --surprise: #f472b6;
            --sadness: #60a5fa;
            --disgust: #a78bfa;
            --anger: #fb7185;
            --anticipation: #fb923c;
            --border: rgba(219, 188, 229, 0.3);
            --shadow: rgba(147, 51, 234, 0.1);
            --glow: rgba(217, 70, 239, 0.4);
        }

        [data-theme="dark"] {
            --bg-primary: linear-gradient(135deg, #1a0b2e 0%, #16213e 50%, #0f1419 100%);
            --bg-secondary: rgba(30, 20, 50, 0.7);
            --bg-card: rgba(50, 35, 80, 0.5);
            --text-primary: #f8f4ff;
            --text-secondary: #c7b8ea;
            --border: rgba(147, 51, 234, 0.2);
            --shadow: rgba(0, 0, 0, 0.3);
            --glow: rgba(147, 51, 234, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            background: var(--bg-primary);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.5s ease;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Анимированные частицы на фоне */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, var(--accent-light) 0%, transparent 70%);
            border-radius: 50%;
            animation: float linear infinite;
            opacity: 0.6;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) translateX(100px) scale(1);
                opacity: 0;
            }
        }

        /* Светящиеся орбы */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.3;
            animation: drift 20s infinite alternate;
        }

        @keyframes drift {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            33% {
                transform: translate(50px, -50px) scale(1.1);
            }
            66% {
                transform: translate(-50px, 50px) scale(0.9);
            }
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, #ffeef8, transparent);
            top: -100px;
            right: -100px;
            animation-duration: 25s;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, #e8f4ff, transparent);
            bottom: -50px;
            left: -50px;
            animation-duration: 30s;
            animation-delay: -10s;
        }

        .orb-3 {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, #f0e7ff, transparent);
            top: 50%;
            left: 50%;
            animation-duration: 20s;
            animation-delay: -5s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Glassmorphism эффект */
        header {
            text-align: center;
            padding: 50px 30px;
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 30px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px var(--shadow),
                        inset 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg,
                transparent 0deg,
                var(--glow) 90deg,
                transparent 180deg
            );
            animation: rotate 10s linear infinite;
            opacity: 0.1;
        }

        @keyframes rotate {
            100% {
                transform: rotate(360deg);
            }
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--surprise) 50%, var(--joy) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            letter-spacing: -0.5px;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 40px var(--glow);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .theory {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: italic;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 50px;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .theme-toggle:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 30px var(--glow);
        }

        .calculator-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 8px 32px var(--shadow),
                        inset 0 1px 0 rgba(255, 255, 255, 0.5);
            border: 1px solid var(--border);
            margin-bottom: 40px;
            transition: all 0.4s ease;
        }

        .calculator-section:hover {
            box-shadow: 0 12px 40px var(--glow);
        }

        .emotion-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 25px;
            align-items: center;
            margin-bottom: 35px;
        }

        .emotion-select-box {
            background: var(--bg-secondary);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(217, 70, 239, 0.05);
        }

        .emotion-select-box:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 25px var(--glow);
            border-color: var(--accent-light);
        }

        .emotion-select-box h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        select {
            width: 100%;
            padding: 18px;
            font-size: 1.1rem;
            border: 1px solid var(--border);
            border-radius: 15px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px var(--glow), inset 0 2px 4px rgba(0, 0, 0, 0.05);
            transform: translateY(-1px);
        }

        .plus-sign {
            font-size: 3.5rem;
            font-weight: 300;
            background: linear-gradient(135deg, var(--accent), var(--surprise));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            filter: drop-shadow(0 0 10px var(--glow));
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .button-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 18px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, var(--surprise) 100%);
            color: white;
            box-shadow: 0 4px 20px var(--glow);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 30px var(--glow);
        }

        .btn-primary:active {
            transform: translateY(-1px) scale(0.98);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
            color: var(--text-primary);
            border: 2px solid var(--accent);
            box-shadow: 0 4px 15px rgba(217, 70, 239, 0.1);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--accent) 0%, var(--surprise) 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px var(--glow);
        }

        .result-section {
            background: var(--bg-card);
            padding: 50px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px var(--shadow);
            border: 3px solid var(--accent);
            display: none;
        }

        .result-section.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-formula {
            text-align: center;
            margin-bottom: 40px;
            font-size: 1.5rem;
        }

        .result-formula .emotion-tag {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 12px;
            margin: 0 10px;
            font-weight: 600;
        }

        .result-main {
            text-align: center;
            margin: 40px 0;
        }

        .result-emoji {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .result-name {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--accent), var(--joy));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-definition {
            font-size: 1.3rem;
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 30px;
        }

        .result-details {
            background: var(--bg-secondary);
            padding: 30px;
            border-radius: 16px;
            margin-top: 30px;
        }

        .detail-section {
            margin: 25px 0;
        }

        .detail-section h4 {
            color: var(--accent);
            margin-bottom: 12px;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .detail-section ul {
            list-style: none;
            padding-left: 0;
        }

        .detail-section li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .detail-section li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }

        .info-box {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            border-left: 4px solid var(--accent);
        }

        .info-box h3 {
            margin-bottom: 15px;
            color: var(--accent);
        }

        .primary-emotions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .primary-emotion {
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            color: white;
            font-size: 1rem;
        }

        .emotion-joy { background: var(--joy); }
        .emotion-trust { background: var(--trust); }
        .emotion-fear { background: var(--fear); }
        .emotion-surprise { background: var(--surprise); }
        .emotion-sadness { background: var(--sadness); }
        .emotion-disgust { background: var(--disgust); }
        .emotion-anger { background: var(--anger); }
        .emotion-anticipation { background: var(--anticipation); }

        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }

            .container {
                padding: 10px;
            }

            header {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            h1 {
                font-size: 1.8rem;
                line-height: 1.2;
            }

            .subtitle {
                font-size: 0.95rem;
            }

            .theory {
                font-size: 0.85rem;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 1rem;
            }

            .mode-toggle {
                margin: 20px auto;
                max-width: 100%;
                flex-direction: column;
                gap: 5px;
            }

            .mode-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }

            .calculator-section {
                padding: 15px;
                margin-bottom: 20px;
            }

            .emotion-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .emotion-select-box {
                padding: 15px;
            }

            .emotion-select-box h3 {
                font-size: 1rem;
                margin-bottom: 10px;
            }

            select {
                padding: 12px;
                font-size: 1rem;
            }

            .plus-sign {
                font-size: 1.5rem;
                padding: 10px 0;
            }

            .button-group {
                flex-direction: column;
                gap: 10px;
            }

            .btn {
                width: 100%;
                padding: 12px 20px;
                font-size: 1rem;
            }

            .result-section {
                padding: 20px;
            }

            .result-formula {
                font-size: 1.1rem;
            }

            .result-formula .emotion-tag {
                padding: 8px 12px;
                margin: 5px;
                font-size: 0.9rem;
                display: inline-block;
            }

            .result-emoji {
                font-size: 3.5rem;
                margin-bottom: 15px;
            }

            .result-name {
                font-size: 1.8rem;
                margin-bottom: 10px;
            }

            .result-definition {
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            .result-details {
                padding: 20px;
            }

            .detail-section {
                margin: 20px 0;
            }

            .detail-section h4 {
                font-size: 1rem;
            }

            .detail-section p,
            .detail-section li {
                font-size: 0.95rem;
            }

            .info-box {
                padding: 20px;
            }

            .info-box h3 {
                font-size: 1.1rem;
            }

            .primary-emotions-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .primary-emotion {
                padding: 12px 8px;
                font-size: 0.85rem;
            }

            .footer {
                padding: 20px 10px;
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }

            .subtitle {
                font-size: 0.9rem;
            }

            .mode-btn {
                font-size: 0.85rem;
                padding: 10px;
            }

            .result-emoji {
                font-size: 3rem;
            }

            .result-name {
                font-size: 1.5rem;
            }

            .primary-emotions-grid {
                grid-template-columns: 1fr;
            }

            .detail-section {
                margin: 15px 0;
            }
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .footer a {
            color: var(--accent);
            text-decoration: none;
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            gap: 0;
            margin: 30px auto;
            background: var(--bg-secondary);
            padding: 5px;
            border-radius: 12px;
            max-width: 400px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background: var(--accent);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Фоновые частицы и орбы -->
    <div class="particles" id="particles"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <button class="theme-toggle" onclick="toggleTheme()">🌓</button>

    <div class="container">
        <header>
            <h1>🎭 Калькулятор синтеза эмоций</h1>
            <p class="subtitle">Узнайте, какая эмоция рождается при смешивании двух базовых чувств</p>
            <p class="theory">На основе теории Роберта Плутчика (1980)</p>
        </header>


        <div class="mode-toggle">
            <button class="mode-btn active" onclick="switchMode('direct')">→ Синтез (базовые → сложные)</button>
            <button class="mode-btn" onclick="switchMode('reverse')">← Разложение (сложные → базовые)</button>
        </div>

        <div class="calculator-section" id="directMode">
            <div class="emotion-grid">
                <div class="emotion-select-box">
                    <h3>Первая эмоция</h3>
                    <select id="emotion1">
                        <option value="">Выберите эмоцию...</option>
                    </select>
                </div>

                <div class="plus-sign">+</div>

                <div class="emotion-select-box">
                    <h3>Вторая эмоция</h3>
                    <select id="emotion2">
                        <option value="">Выберите эмоцию...</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="randomPair()">🎲 Случайная пара</button>
                <button class="btn btn-primary" onclick="calculate()">✨ Рассчитать синтез</button>
            </div>
        </div>


        <div class="calculator-section" id="reverseMode" style="display:none">
            <div class="emotion-grid" style="grid-template-columns: 1fr">
                <div class="emotion-select-box">
                    <h3>Сложная эмоция для разложения</h3>
                    <select id="complexEmotion">
                        <option value="">Выберите сложную эмоцию...</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="decompose()">🔍 Разложить на базовые</button>
            </div>
        </div>

        <div class="result-section" id="results">
            <div class="result-formula" id="formula"></div>
            <div class="result-main">
                <div class="result-emoji" id="resultEmoji"></div>
                <div class="result-name" id="resultName"></div>
                <div class="result-definition" id="resultDefinition"></div>
            </div>
            <div class="result-details" id="resultDetails"></div>
        </div>

        <div class="info-box">
            <h3>📚 8 Базовых эмоций по Плутчику</h3>
            <p>Психолог Роберт Плутчик выделил 8 первичных эмоций, которые комбинируясь, создают все многообразие человеческих чувств:</p>
            <div class="primary-emotions-grid">
                <div class="primary-emotion emotion-joy">😊 Радость</div>
                <div class="primary-emotion emotion-trust">🤝 Доверие</div>
                <div class="primary-emotion emotion-fear">😨 Страх</div>
                <div class="primary-emotion emotion-surprise">😲 Удивление</div>
                <div class="primary-emotion emotion-sadness">😢 Грусть</div>
                <div class="primary-emotion emotion-disgust">🤢 Отвращение</div>
                <div class="primary-emotion emotion-anger">😠 Гнев</div>
                <div class="primary-emotion emotion-anticipation">🔮 Предвкушение</div>
            </div>
        </div>

        <footer class="footer">
            <p>💜 Развивайте эмоциональный интеллект через понимание эмоций</p>
            <p style="margin-top: 10px;">Основано на <a href="https://www.6seconds.org/2025/02/06/plutchik-wheel-emotions/" target="_blank">психоэволюционной теории эмоций Плутчика</a></p>
        </footer>
    </div>

    <script>
        // База базовых эмоций по Плутчику
        const primaryEmotions = [
            {
                id: 1,
                name: "Радость",
                emoji: "😊",
                color: "#fbbf24",
                definition: "Чувство удовольствия и благополучия",
                intensity: {
                    low: "Безмятежность",
                    high: "Экстаз"
                },
                opposite: "Грусть",
                function: "Побуждает к повторению приятного опыта",
                symptoms: ["Улыбка", "Легкость в теле", "Желание делиться"],
                situations: ["Достижение цели", "Встреча с близким", "Приятные события"],
                mechanism: "Активация системы вознаграждения в мозге. Дофамин и серотонин создают ощущение удовольствия, закрепляя полезное поведение. Радость снижает кортизол (гормон стресса) и укрепляет иммунитет.",
                neurobiology: "Активируются прилежащее ядро (nucleus accumbens), вентральная область покрышки (VTA), префронтальная кора. Выброс дофамина, серотонина, эндорфинов. Снижение активности амигдалы.",
                duration: "От нескольких секунд (мимолетная радость) до нескольких часов (глубокое счастье). Пиковая радость обычно длится 1-3 минуты.",
                therapy: [
                    "Дневник благодарности - записывайте 3 хороших события дня",
                    "Практика смакования - осознанно наслаждайтесь приятными моментами",
                    "Делитесь радостью - рассказывание о хорошем усиливает переживание",
                    "Упражнение 'Три хороших вещи' - перед сном вспомните позитивное",
                    "Намеренная улыбка - даже фальшивая улыбка запускает химию радости"
                ],
                helps: ["Движение и физическая активность", "Социальные связи", "Достижение целей", "Благодарность", "Помощь другим"],
                hinders: ["Сравнение с другими", "Перфекционизм", "Откладывание удовольствий", "Фокус на негативе", "Социальная изоляция"],
                forOthers: "Человек улыбается (настоящая улыбка - морщинки у глаз), оживленная речь, открытая поза, желание общаться, энергичность, блеск в глазах"
            },
            {
                id: 2,
                name: "Доверие",
                emoji: "🤝",
                color: "#10b981",
                definition: "Принятие другого или ситуации как безопасных",
                intensity: {
                    low: "Принятие",
                    high: "Обожание"
                },
                opposite: "Отвращение",
                function: "Формирует социальные связи и сотрудничество",
                symptoms: ["Открытость", "Расслабленность", "Желание сближаться"],
                situations: ["Надежные отношения", "Безопасная среда", "Проверенный человек"],
                mechanism: "Снижение защитных механизмов через оценку безопасности. Окситоцин (гормон связи) усиливает социальное сближение. Доверие формируется через повторяющиеся позитивные взаимодействия.",
                neurobiology: "Активация медиальной префронтальной коры, передней поясной коры, островковой доли. Выброс окситоцина и вазопрессина. Снижение активности амигдалы при оценке 'своих'.",
                duration: "Базовое доверие формируется годами. Ситуативное доверие возникает за минуты-часы при позитивных сигналах.",
                therapy: [
                    "Упражнение 'Малые шаги' - начните с микро-доверия к безопасным людям",
                    "Ведение дневника надежности - отмечайте когда люди были надежны",
                    "Практика уязвимости - делитесь малым с проверенными людьми",
                    "Анализ паттернов - изучите свою историю доверия/недоверия",
                    "Установление границ - доверие не значит отсутствие защиты"
                ],
                helps: ["Честность и прозрачность", "Последовательность в действиях", "Выполнение обещаний", "Эмпатия", "Время"],
                hinders: ["Обман и предательство", "Непредсказуемость", "Нарушение границ", "Манипуляции", "Поспешность"],
                forOthers: "Расслабленные плечи, открытая поза, прямой зрительный контакт, готовность делиться личным, отсутствие напряжения в лице"
            },
            {
                id: 3,
                name: "Страх",
                emoji: "😨",
                color: "#6366f1",
                definition: "Реакция на угрозу или опасность",
                intensity: {
                    low: "Опасение",
                    high: "Ужас"
                },
                opposite: "Гнев",
                function: "Защищает от опасности, мобилизует к бегству",
                symptoms: ["Учащенное сердцебиение", "Напряжение", "Желание убежать", "Расширенные зрачки"],
                situations: ["Угроза", "Неизвестность", "Потенциальная опасность"],
                mechanism: "Реакция 'бей-беги-замри'. Амигдала мгновенно оценивает угрозу, запуская выброс адреналина. Кровь приливает к мышцам, чувства обостряются, мышление сужается до фокуса на выживание.",
                neurobiology: "Гиперактивация амигдалы, гипоталамуса, периакведуктального серого вещества. Выброс адреналина, норадреналина, кортизола. Снижение активности префронтальной коры (рациональное мышление).",
                duration: "Острый страх: секунды-минуты. Хронический страх/тревога: часы, дни, годы при расстройствах.",
                therapy: [
                    "Техника заземления '5-4-3-2-1' - назовите 5 вещей которые видите, 4 которые слышите, и тд",
                    "Дыхание 4-7-8 - вдох на 4, задержка на 7, выдох на 8",
                    "Постепенная экспозиция - медленное привыкание к страху под контролем",
                    "Переоценка угрозы - задайте себе 'Какова реальная вероятность?'",
                    "Физическая активность - сжигает гормоны стресса"
                ],
                helps: ["Подготовка и планирование", "Поддержка близких", "Знание и информация", "Техники релаксации", "Малые победы"],
                hinders: ["Избегание", "Катастрофизация", "Изоляция", "Употребление веществ", "Фиксация на угрозе"],
                forOthers: "Широко раскрытые глаза, бледность, дрожь, сжатие тела, прерывистое дыхание, речь может быть быстрой или застопориться"
            },
            {
                id: 4,
                name: "Удивление",
                emoji: "😲",
                color: "#ec4899",
                definition: "Реакция на неожиданное событие",
                intensity: {
                    low: "Отвлечение",
                    high: "Изумление"
                },
                opposite: "Предвкушение",
                function: "Фокусирует внимание на новом стимуле",
                symptoms: ["Широко раскрытые глаза", "Остановка дыхания", "Замирание"],
                situations: ["Неожиданность", "Новая информация", "Сюрприз"],
                mechanism: "Прерывание текущей деятельности для обработки новой информации. Ориентировочный рефлекс активирует внимание на максимум. Мозг быстро оценивает: опасность или возможность?",
                neurobiology: "Активация гиппокампа (обработка нового), лобной коры, теменных долей. Резкий выброс норадреналина. Временное торможение других процессов.",
                duration: "Самая короткая эмоция: от долей секунды до 1-2 минут. Быстро трансформируется в другую эмоцию (радость, страх, интерес).",
                therapy: ["Практика осознанности - замечайте новое в привычном", "Культивируйте любопытство - задавайте вопросы", "Путешествия и новый опыт - расширяйте зону комфорта", "Обучение новому - держите мозг в тонусе", "Pause and observe - дайте время на осознание нового"],
                helps: ["Новизна и разнообразие", "Путешествия", "Обучение", "Творчество", "Смена рутины"],
                hinders: ["Жесткая рутина", "Предсказуемость", "Закрытость к новому", "Цинизм", "Перегрузка информацией"],
                forOthers: "Поднятые брови, открытый рот, расширенные глаза, замирание на мгновение, восклицание 'О!' или 'Вау!'"
            },
            {
                id: 5,
                name: "Грусть",
                emoji: "😢",
                color: "#3b82f6",
                definition: "Эмоция потери или разочарования",
                intensity: {
                    low: "Задумчивость",
                    high: "Горе"
                },
                opposite: "Радость",
                function: "Сигнализирует о потребности в поддержке и восстановлении",
                symptoms: ["Слезы", "Низкая энергия", "Замедленность", "Тяжесть"],
                situations: ["Потеря", "Разлука", "Неудача", "Разочарование"],
                mechanism: "Сигнал о потере или неудаче, вызывающий замедление и рефлексию. Снижение энергии помогает переработать потерю. Грусть привлекает поддержку от других.",
                neurobiology: "Снижение активности прилежащего ядра (система вознаграждения), повышение активности передней поясной коры. Снижение серотонина и дофамина.",
                duration: "От нескольких часов до недель. Здоровая грусть проходит. Депрессия - когда грусть застревает на месяцы.",
                therapy: ["Выплакаться - слезы содержат стрессовые гормоны и выводят их", "Ритуалы прощания - завершите незавершенное", "Творческое выражение - искусство, музыка, письмо", "Позвольте грустить - подавление усиливает боль", "Социальная поддержка - делитесь с близкими", "Gentle activity - мягкое движение без насилия"],
                helps: ["Время", "Поддержка близких", "Выражение чувств", "Принятие потери", "Забота о себе"],
                hinders: ["Подавление эмоций", "Изоляция", "Самообвинение", "Алкоголь/вещества", "Отрицание"],
                forOthers: "Опущенные уголки губ, тусклые глаза, медленная речь, сутулость, низкая энергия, слезы, желание побыть одному"
            },
            {
                id: 6,
                name: "Отвращение",
                emoji: "🤢",
                color: "#8b5cf6",
                definition: "Реакция отторжения неприятного",
                intensity: {
                    low: "Скука",
                    high: "Омерзение"
                },
                opposite: "Доверие",
                function: "Защищает от вредных веществ или идей",
                symptoms: ["Морщится лицо", "Тошнота", "Желание отодвинуться"],
                situations: ["Неприятный запах/вкус", "Нарушение норм", "Что-то отталкивающее"],
                mechanism: "Защита от токсичного (еда, идеи, поведение). Эволюционно защищало от отравления. Социальное отвращение защищает от нарушителей норм.",
                neurobiology: "Активация островковой доли (insula) - центр висцеральных ощущений, базальных ганглиев. Связь с тошнотой и рвотным рефлексом.",
                duration: "Секунды при физическом отвращении. Моральное отвращение может длиться долго при виде объекта.",
                therapy: ["Постепенная десенситизация - при фобическом отвращении", "Cognitive reframing - переоценка 'отвратительного'", "Принятие разнообразия - не все должно нравиться", "Различайте защиту и предрассудки", "Телесная терапия - работа с физическими ощущениями"],
                helps: ["Дистанция от объекта", "Гигиена и чистота", "Установление границ", "Юмор", "Понимание различий"],
                hinders: ["Принуждение контакта", "Игнорирование границ", "Моральное превосходство", "Генерализация", "Фиксация"],
                forOthers: "Сморщенный нос, приподнятая верхняя губа, отворачивание, желание отстраниться, возможна тошнота"
            },
            {
                id: 7,
                name: "Гнев",
                emoji: "😠",
                color: "#ef4444",
                definition: "Реакция на препятствие или несправедливость",
                intensity: {
                    low: "Раздражение",
                    high: "Ярость"
                },
                opposite: "Страх",
                function: "Мобилизует энергию для преодоления препятствий",
                symptoms: ["Сжатые кулаки", "Напряжение мышц", "Жар", "Повышенный голос"],
                situations: ["Несправедливость", "Препятствие", "Нарушение границ"],
                mechanism: "Мобилизация энергии для преодоления препятствия или восстановления справедливости. Усиливает силу и решительность. Сигнал нарушенной границы.",
                neurobiology: "Активация амигдалы, гипоталамуса, периакведуктального серого вещества. Выброс адреналина, норадреналина, тестостерона. Снижение префронтальной активности.",
                duration: "Вспышка гнева: секунды-минуты. Хроническое раздражение: часы-дни. Затяжная обида: годы.",
                therapy: ["Timeout техника - уйдите на 20 минут остыть", "Физическая разрядка - бокс груши, бег, крик в подушку", "Assertive communication - выражайте потребности напрямую", "Identify triggers - что запускает ваш гнев?", "Progressive muscle relaxation - напрягайте и расслабляйте мышцы", "Journaling - пишите о гневе"],
                helps: ["Физическая активность", "Ассертивность", "Решение проблемы", "Тайм-ауты", "Справедливость"],
                hinders: ["Подавление", "Пассивная агрессия", "Алкоголь", "Руминация (прокручивание)", "Насилие"],
                forOthers: "Сжатые челюсти, напряженные мышцы, покраснение лица, пристальный взгляд, громкий голос, резкие движения"
            },
            {
                id: 8,
                name: "Предвкушение",
                emoji: "🔮",
                color: "#f97316",
                definition: "Ожидание будущего события",
                intensity: {
                    low: "Интерес",
                    high: "Бдительность"
                },
                opposite: "Удивление",
                function: "Подготавливает к будущим событиям",
                symptoms: ["Настороженность", "Готовность", "Фокус на будущем"],
                situations: ["Ожидание события", "Планирование", "Подготовка"],
                mechanism: "Подготовка организма к будущему событию. Планирование и готовность. Дофамин создает мотивацию к действию. Ориентация на будущее.",
                neurobiology: "Активация префронтальной коры (планирование), дорсального стриатума, мозжечка. Выброс дофамина в ожидании награды.",
                duration: "От минут (перед событием) до недель/месяцев (долгосрочные планы).",
                therapy: ["Realistic planning - конкретные шаги вместо фантазий", "Mindfulness - баланс между будущим и настоящим", "Визуализация успеха - представьте желаемое", "Break down goals - разбейте большое на малое", "Celebrate milestones - отмечайте прогресс"],
                helps: ["Планирование", "Цели и мечты", "Подготовка", "Оптимизм", "Действие"],
                hinders: ["Только мечты без действий", "Перфекционизм", "Страх неудачи", "Прокрастинация", "Негативные прогнозы"],
                forOthers: "Живость, энергичность, разговоры о планах, приподнятое настроение, деятельность по подготовке"
            }
        ];

        // База синтезированных эмоций (вторичные диады)
        const emotionSynthesis = {
            // Формулы синтеза по Плутчику
            "Радость+Доверие": {
                name: "Любовь",
                emoji: "❤️",
                definition: "Глубокая привязанность и забота",
                type: "Первичная диада",
                explanation: "Когда радость от присутствия человека соединяется с доверием к нему, рождается любовь.",
                symptoms: ["Теплота в груди", "Желание близости", "Забота о другом", "Счастье от его присутствия"],
                examples: ["Романтические отношения", "Родительская любовь", "Близкая дружба"],
                tips: ["Выражайте чувства открыто", "Проводите качественное время вместе", "Заботьтесь и принимайте заботу"]
            },
            "Доверие+Страх": {
                name: "Покорность",
                emoji: "🙇",
                definition: "Принятие чужой власти или воли",
                type: "Первичная диада",
                explanation: "Страх в сочетании с доверием к авторитету создает покорность.",
                symptoms: ["Готовность подчиняться", "Уважение к авторитету", "Отказ от сопротивления"],
                examples: ["Подчинение начальнику", "Следование за лидером", "Религиозное смирение"],
                tips: ["Проверяйте, не манипулируют ли вами", "Сохраняйте собственное мнение", "Различайте здоровое уважение и зависимость"]
            },
            "Страх+Удивление": {
                name: "Благоговение",
                emoji: "😳",
                definition: "Смесь страха и восхищения перед чем-то величественным",
                type: "Первичная диада",
                explanation: "Страх перед могуществом, смешанный с удивлением, создает благоговение.",
                symptoms: ["Ощущение малости себя", "Восхищение", "Трепет", "Замирание"],
                examples: ["Величие природы", "Духовный опыт", "Встреча с гением"],
                tips: ["Позвольте себе прочувствовать момент", "Это признак открытости к новому опыту"]
            },
            "Удивление+Грусть": {
                name: "Разочарование",
                emoji: "😞",
                definition: "Неоправданные ожидания",
                type: "Первичная диада",
                explanation: "Когда удивление от неожиданного соединяется с грустью от потери надежд, возникает разочарование.",
                symptoms: ["Упадок сил", "Потеря мотивации", "Переоценка ситуации"],
                examples: ["Обманутые ожидания", "Неудавшийся проект", "Разочарование в человеке"],
                tips: ["Пересмотрите свои ожидания", "Извлеките уроки", "Дайте себе время погоревать"]
            },
            "Грусть+Отвращение": {
                name: "Раскаяние",
                emoji: "😔",
                definition: "Сожаление о своих действиях с самоосуждением",
                type: "Первичная диада",
                explanation: "Грусть от последствий своих действий и отвращение к себе создают раскаяние.",
                symptoms: ["Самоупрек", "Желание исправить", "Стыд за поступок", "Моральная боль"],
                examples: ["Сожаление об ошибке", "Чувство вины за проступок", "Угрызения совести"],
                tips: ["Извлеките урок", "Исправьте что возможно", "Простите себя", "Используйте для роста"]
            },
            "Отвращение+Гнев": {
                name: "Презрение",
                emoji: "😏",
                definition: "Чувство превосходства и пренебрежения",
                type: "Первичная диада",
                explanation: "Отвращение к чему-то, усиленное гневом, трансформируется в презрение.",
                symptoms: ["Насмешка", "Холодность", "Чувство превосходства", "Дистанцирование"],
                examples: ["Презрение к нарушителям норм", "Пренебрежение к слабости", "Моральное осуждение"],
                tips: ["Остерегайтесь токсичности", "Ищите человечность в других", "Работайте с эмпатией"]
            },
            "Гнев+Предвкушение": {
                name: "Агрессия",
                emoji: "😤",
                definition: "Активное нападение или противостояние",
                type: "Первичная диада",
                explanation: "Гнев, направленный в будущее с предвкушением действия, становится агрессией.",
                symptoms: ["Готовность атаковать", "Напряжение", "Планирование нападения", "Враждебность"],
                examples: ["Защита территории", "Противостояние угрозе", "Активная самозащита"],
                tips: ["Оцените необходимость", "Ищите конструктивные пути", "Не действуйте сгоряча"]
            },
            "Предвкушение+Радость": {
                name: "Оптимизм",
                emoji: "😊",
                definition: "Позитивный взгляд на будущее",
                type: "Первичная диада",
                explanation: "Предвкушение хорошего будущего, окрашенное радостью, создает оптимизм.",
                symptoms: ["Надежда", "Позитивные мысли", "Энергия", "Уверенность в хорошем"],
                examples: ["Вера в успех", "Позитивное планирование", "Надежда на лучшее"],
                tips: ["Сохраняйте реализм", "Планируйте конкретные шаги", "Заряжайте других энергией"]
            },
            "Радость+Страх": {
                name: "Вина",
                emoji: "😰",
                definition: "Чувство неправильности радости или удовольствия",
                type: "Вторичная диада",
                explanation: "Когда радость от чего-то вызывает страх последствий или осуждения, возникает вина.",
                symptoms: ["Внутренний конфликт", "Страх наказания", "Подавление радости", "Тревога"],
                examples: ["Радость от запретного", "Удовольствие за счет других", "Успех на фоне чужих неудач"],
                tips: ["Разберитесь в источнике вины", "Оцените реальность 'преступления'", "Не путайте здоровую совесть с токсичным стыдом"]
            },
            "Доверие+Грусть": {
                name: "Сентиментальность",
                emoji: "🥺",
                definition: "Нежная грусть о прошлом",
                type: "Вторичная диада",
                explanation: "Доверие к прошлому опыту, окрашенное грустью о его утрате, создает сентиментальность.",
                symptoms: ["Теплые воспоминания", "Легкая грусть", "Ностальгия", "Умиление"],
                examples: ["Воспоминания о детстве", "Старые фотографии", "Встреча с прошлым"],
                tips: ["Цените прошлое, живите настоящим", "Сохраняйте важные воспоминания"]
            },
            "Страх+Гнев": {
                name: "Ревность",
                emoji: "😠",
                definition: "Страх потери важного через гнев к угрозе",
                type: "Вторичная диада (по некоторым теориям)",
                explanation: "Страх потерять кого-то важного смешивается с гневом на возможного соперника.",
                symptoms: ["Подозрительность", "Тревога потери", "Агрессия к 'сопернику'", "Контроль"],
                examples: ["Ревность в отношениях", "Профессиональная конкуренция", "Страх замены"],
                tips: ["Работайте с доверием", "Говорите о чувствах", "Развивайте уверенность в себе"]
            },
            "Удивление+Гнев": {
                name: "Возмущение",
                emoji: "😠",
                definition: "Гневная реакция на неожиданную несправедливость",
                type: "Вторичная диада",
                explanation: "Неожиданность несправедливости усиливает гнев, создавая возмущение.",
                symptoms: ["Протест", "Желание исправить", "Активное недовольство"],
                examples: ["Внезапная несправедливость", "Неожиданное предательство"],
                tips: ["Канализируйте в конструктивное действие", "Защищайте свои границы"]
            },
            "Гнев+Радость": {
                name: "Гордость",
                emoji: "😌",
                definition: "Удовлетворение от преодоления через борьбу",
                type: "Вторичная диада",
                explanation: "Гнев, направленный на преодоление препятствий, при успехе трансформируется в гордость.",
                symptoms: ["Самоуважение", "Удовлетворение достижением", "Признание своей силы"],
                examples: ["Гордость за достижение", "Победа над трудностями"],
                tips: ["Отмечайте успехи", "Делитесь с другими", "Баланс между гордостью и скромностью"]
            },
            "Предвкушение+Страх": {
                name: "Тревога",
                emoji: "😰",
                definition: "Беспокойное ожидание возможной угрозы",
                type: "Первичная диада",
                explanation: "Предвкушение будущего, окрашенное страхом, создает тревогу.",
                symptoms: ["Беспокойство", "Напряжение", "Негативные сценарии", "Невозможность расслабиться"],
                examples: ["Тревога перед экзаменом", "Беспокойство о здоровье", "Страх неопределенности"],
                tips: ["Заземлитесь в настоящем", "Оцените реальность угрозы", "Дышите глубоко", "Составьте план действий"]
            },
            "Грусть+Гнев": {
                name: "Обида",
                emoji: "😤",
                definition: "Боль от несправедливого обращения с желанием возмездия",
                type: "Вторичная диада",
                explanation: "Грусть от боли, причиненной другим, смешанная с гневом на обидчика.",
                symptoms: ["Чувство несправедливости", "Желание, чтобы обидчик страдал", "Застревание в прошлом"],
                examples: ["Обида на близкого", "Непрощенное предательство"],
                tips: ["Выразите чувства", "Работайте с прощением", "Установите границы"]
            },
            "Радость+Удивление": {
                name: "Восторг",
                emoji: "🤩",
                definition: "Сильное восхищение от приятной неожиданности",
                type: "Вторичная диада",
                explanation: "Радость от неожиданного позитивного события создает восторг.",
                symptoms: ["Эйфория", "Возбуждение", "Желание кричать от счастья"],
                examples: ["Неожиданный подарок", "Сюрприз от любимого"],
                tips: ["Наслаждайтесь моментом", "Делитесь радостью"]
            },
            "Радость+Грусть": {
                name: "Ностальгия",
                emoji: "🥲",
                definition: "Светлая печаль о прошлом, окрашенная теплотой",
                type: "Противоположные эмоции",
                explanation: "Радость от воспоминаний смешивается с грустью о их утрате, создавая сладко-горькое чувство.",
                symptoms: ["Теплые воспоминания", "Легкая грусть", "Улыбка сквозь слёзы", "Тоска по прошлому"],
                examples: ["Воспоминания о детстве", "Просмотр старых фото", "Встреча с местами юности"],
                tips: ["Цените моменты", "Живите настоящим", "Благодарите за опыт"]
            },
            "Радость+Отвращение": {
                name: "Злорадство",
                emoji: "😏",
                definition: "Радость от чужих неудач или страданий",
                type: "Вторичная диада",
                explanation: "Радость, смешанная с отвращением к объекту, создает злорадство - удовольствие от его неудачи.",
                symptoms: ["Скрытая улыбка", "Удовлетворение от чужой боли", "Чувство справедливости возмездия"],
                examples: ["Радость от неудачи врага", "Наказание обидчика", "Карма настигла"],
                tips: ["Осознайте токсичность", "Развивайте эмпатию", "Ищите конструктивные пути"]
            },
            "Доверие+Удивление": {
                name: "Любопытство",
                emoji: "🤔",
                definition: "Открытость к новому с готовностью принять",
                type: "Вторичная диада",
                explanation: "Доверие к миру сочетается с удивлением перед неизвестным, рождая любопытство.",
                symptoms: ["Желание узнать больше", "Открытость", "Исследовательский интерес", "Вовлечённость"],
                examples: ["Научное исследование", "Изучение нового", "Интерес к людям"],
                tips: ["Задавайте вопросы", "Исследуйте безопасно", "Учитесь на опыте"],
                mechanism: "Доверие снижает защитные барьеры, а удивление активирует ориентировочный рефлекс. Вместе они создают безопасное исследовательское поведение. Дофамин мотивирует к изучению, а низкий кортизол (из-за доверия) позволяет рисковать.",
                when: ["Встреча с чем-то новым в безопасной среде", "Обучение у доверенного учителя", "Исследование незнакомой территории с проводником", "Чтение увлекательной книги", "Знакомство с интересным человеком"],
                physiology: ["Расширенные зрачки (интерес)", "Наклон головы вперед", "Открытая поза тела", "Активная мимика", "Вопросительные интонации", "Повышенная концентрация внимания"],
                detailedExamples: [
                    "Ребёнок, изучающий новую игрушку без страха",
                    "Учёный, погружённый в исследование интригующей гипотезы",
                    "Путешественник, исследующий новую культуру с открытым сердцем",
                    "Студент, задающий вопросы преподавателю",
                    "Человек, пробующий новое хобби"
                ],
                therapy: [
                    "Cultivate safe exploration - создайте безопасное пространство для изучения",
                    "Follow your interests - идите за тем, что интересно",
                    "Ask 'what if' questions - развивайте гипотетическое мышление",
                    "Keep beginner's mind - сохраняйте взгляд новичка",
                    "Document discoveries - ведите дневник открытий",
                    "Join learning communities - общайтесь с любознательными людьми"
                ],
                helps: ["Безопасная среда", "Новизна без угрозы", "Поддержка исследований", "Время на изучение", "Доступ к информации"],
                hinders: ["Страх ошибок", "Критика за вопросы", "Перегрузка информацией", "Дефицит времени", "Наказание за эксперименты"],
                cultural: "В некоторых культурах любопытство поощряется (Скандинавия, США), в других может восприниматься как невежливость (Япония, формальные контексты)",
                quote: "\"Любопытство - это двигатель достижений\" - Кен Робинсон"
            },
            "Доверие+Отвращение": {
                name: "Цинизм",
                emoji: "😒",
                definition: "Понимание механизмов с отвращением к их природе",
                type: "Противоположные эмоции",
                explanation: "Доверие к фактам и закономерностям смешивается с отвращением к методам и морали, создавая цинизм.",
                symptoms: ["Разочарование в идеалах", "Насмешка над наивностью", "Понимание 'как устроено'", "Горечь опыта"],
                examples: ["Понимание политики", "Разочарование в системе", "Знание изнанки"],
                tips: ["Не теряйте человечность", "Ищите светлое", "Баланс между знанием и надеждой"]
            },
            "Доверие+Гнев": {
                name: "Праведность",
                emoji: "⚖️",
                definition: "Справедливый гнев на основе твёрдых убеждений",
                type: "Вторичная диада",
                explanation: "Доверие к своим ценностям и принципам, усиленное гневом на их нарушение, создает праведность.",
                symptoms: ["Желание восстановить справедливость", "Моральное негодование", "Уверенность в правоте"],
                examples: ["Борьба за права", "Защита слабых", "Противостояние несправедливости"],
                tips: ["Проверяйте свою правоту", "Не путайте с фанатизмом", "Действуйте конструктивно"]
            },
            "Доверие+Предвкушение": {
                name: "Надежда",
                emoji: "🌟",
                definition: "Вера в позитивное будущее",
                type: "Вторичная диада",
                explanation: "Доверие к возможностям будущего смешивается с предвкушением хорошего, создавая надежду.",
                symptoms: ["Вера в лучшее", "Позитивное ожидание", "Энергия для действий", "Стойкость"],
                examples: ["Надежда на выздоровление", "Вера в изменения", "Ожидание лучших времён"],
                tips: ["Подкрепляйте действиями", "Сохраняйте реализм", "Делитесь надеждой"]
            },
            "Страх+Грусть": {
                name: "Отчаяние",
                emoji: "😣",
                definition: "Безнадёжность и беспомощность",
                type: "Вторичная диада",
                explanation: "Страх перед будущим соединяется с грустью от текущей ситуации, создавая отчаяние.",
                symptoms: ["Чувство безвыходности", "Потеря надежды", "Апатия", "Беспомощность"],
                examples: ["Тяжёлая жизненная ситуация", "Накопление проблем", "Потеря всего важного"],
                tips: ["Обратитесь за помощью", "Фокусируйтесь на малом", "Один шаг за раз"]
            },
            "Страх+Отвращение": {
                name: "Паранойя",
                emoji: "😨",
                definition: "Восприятие окружения как опасного и враждебного",
                type: "Вторичная диада",
                explanation: "Страх угрозы смешивается с отвращением к окружающему, создавая параноидальное восприятие.",
                symptoms: ["Подозрительность", "Видение угроз везде", "Изоляция", "Недоверие"],
                examples: ["Параноидальные мысли", "Страх преследования", "Всё кажется опасным"],
                tips: ["Проверяйте реальность", "Обратитесь к специалисту", "Заземлитесь в фактах"]
            },
            "Удивление+Отвращение": {
                name: "Оторопь",
                emoji: "😳",
                definition: "Шокирующая неожиданность неприятного",
                type: "Вторичная диада",
                explanation: "Удивление от неожиданного смешивается с отвращением к содержанию, создавая оторопь.",
                symptoms: ["Шок", "Неспособность поверить", "Отвращение", "Ступор"],
                examples: ["Неожиданное предательство", "Шокирующее открытие", "Отвратительный сюрприз"],
                tips: ["Дайте время переварить", "Выразите чувства", "Ищите поддержку"]
            },
            "Удивление+Предвкушение": {
                name: "Любознательность",
                emoji: "🔍",
                definition: "Интерес к тому, что будет дальше",
                type: "Противоположные диады",
                explanation: "Удивление от нового смешивается с предвкушением раскрытия тайны, создавая любознательность.",
                symptoms: ["Желание узнать продолжение", "Интрига", "Вовлечённость", "Нетерпение"],
                examples: ["Интересная загадка", "Захватывающая история", "Научное открытие"],
                tips: ["Исследуйте с интересом", "Задавайте вопросы", "Наслаждайтесь процессом"]
            },
            "Грусть+Предвкушение": {
                name: "Меланхолия",
                emoji: "😔",
                definition: "Грустное ожидание или размышление о будущем",
                type: "Вторичная диада",
                explanation: "Грусть окрашивает предвкушение будущего, создавая меланхоличное настроение.",
                symptoms: ["Задумчивость", "Лёгкая грусть", "Размышления о бренности", "Созерцательность"],
                examples: ["Осенняя тоска", "Размышления о времени", "Предчувствие перемен"],
                tips: ["Примите чувство", "Творите", "Найдите красоту в моменте"]
            },
            "Отвращение+Предвкушение": {
                name: "Опасение",
                emoji: "😰",
                definition: "Брезгливое предчувствие неприятного",
                type: "Вторичная диада",
                explanation: "Предвкушение будущего события смешивается с отвращением к нему, создавая опасение.",
                symptoms: ["Нежелание участвовать", "Предчувствие неприятного", "Желание избежать", "Брезгливость"],
                examples: ["Неприятная обязанность", "Предстоящая неприятность", "Вынужденное участие"],
                tips: ["Подготовьтесь морально", "Ищите способы облегчить", "Помните что пройдёт"]
            }
        };

        // Генерация недостающих комбинаций на лету
        function generateMissing(name1, name2) {
            // Одинаковые эмоции - усиление
            if (name1 === name2) {
                const intensityMap = {
                    "Радость": {name: "Эйфория", emoji: "🤩", def: "Крайняя степень радости"},
                    "Доверие": {name: "Преданность", emoji: "🤝", def: "Глубокое доверие"},
                    "Страх": {name: "Ужас", emoji: "😱", def: "Крайний страх"},
                    "Удивление": {name: "Шок", emoji: "😲", def: "Крайнее удивление"},
                    "Грусть": {name: "Депрессия", emoji: "😭", def: "Глубокая грусть"},
                    "Отвращение": {name: "Омерзение", emoji: "🤮", def: "Крайнее отвращение"},
                    "Гнев": {name: "Ярость", emoji: "😡", def: "Крайний гнев"},
                    "Предвкушение": {name: "Нетерпение", emoji: "😣", def: "Крайнее предвкушение"}
                };
                const intense = intensityMap[name1];
                return {
                    name: intense.name,
                    emoji: intense.emoji,
                    definition: intense.def,
                    type: "Усиленная базовая эмоция",
                    explanation: `${name1}, усиливаясь сама собой, переходит в ${intense.name.toLowerCase()}`,
                    symptoms: [`Крайняя степень проявления ${name1.toLowerCase()}`, "Очень высокая интенсивность", "Сложность контроля"],
                    examples: [`Длительное переживание ${name1.toLowerCase()}`, "Накопление эмоции"],
                    tips: ["Дайте эмоции выход", "Обратитесь за поддержкой", "Найдите способы регуляции"]
                };
            }
            
            // Для остальных комбинаций - универсальный ответ
            return {
                name: "Смешанная эмоция",
                emoji: "❓",
                definition: "Комбинация не имеет устоявшегося названия",
                type: "Неопределенная комбинация",
                explanation: `${name1} и ${name2} могут сосуществовать одновременно, создавая сложное амбивалентное состояние`,
                symptoms: ["Противоречивые чувства", "Внутренний конфликт", "Сложность понимания своего состояния"],
                examples: ["Ситуации с противоречивыми стимулами", "Сложные жизненные обстоятельства"],
                tips: ["Примите сложность чувств", "Дайте место обеим эмоциям", "Исследуйте каждую отдельно"]
            };
        }

        // Создаем обратный индекс для разложения
        const reverseIndex = {};
        Object.keys(emotionSynthesis).forEach(key => {
            const [base1, base2] = key.split('+');
            const emotion = emotionSynthesis[key];
            
            if (!reverseIndex[emotion.name]) {
                reverseIndex[emotion.name] = {
                    emoji: emotion.emoji,
                    definition: emotion.definition,
                    explanation: emotion.explanation,
                    components: [[base1, base2]]
                };
            } else {
                // Проверяем, не добавлена ли уже такая комбинация
                const exists = reverseIndex[emotion.name].components.some(
                    c => (c[0] === base1 && c[1] === base2) || (c[0] === base2 && c[1] === base1)
                );
                if (!exists) {
                    reverseIndex[emotion.name].components.push([base1, base2]);
                }
            }
        });


        // Инициализация
        let currentTheme = 'light';

        function init() {
            populateSelects();
            loadTheme();
        }


        function populateSelects() {
            const select1 = document.getElementById('emotion1');
            const select2 = document.getElementById('emotion2');
            const complexSelect = document.getElementById('complexEmotion');

            primaryEmotions.forEach(emotion => {
                const option1 = new Option(`${emotion.emoji} ${emotion.name}`, emotion.name);
                const option2 = new Option(`${emotion.emoji} ${emotion.name}`, emotion.name);
                select1.add(option1);
                select2.add(option2);
            });

            // Заполняем список сложных эмоций для обратного калькулятора
            const complexEmotions = Object.keys(reverseIndex).sort();
            complexEmotions.forEach(emotionName => {
                const emotion = reverseIndex[emotionName];
                const option = new Option(`${emotion.emoji} ${emotionName}`, emotionName);
                complexSelect.add(option);
            });
        }

        function getSynthesisKey(name1, name2) {
            // Проверяем обе комбинации
            const key1 = `${name1}+${name2}`;
            const key2 = `${name2}+${name1}`;

            if (emotionSynthesis[key1]) return key1;
            if (emotionSynthesis[key2]) return key2;
            return null;
        }

        function calculate() {
            const name1 = document.getElementById('emotion1').value;
            const name2 = document.getElementById('emotion2').value;

            if (!name1 || !name2) {
                alert('Пожалуйста, выберите обе эмоции');
                return;
            }

            const emotion1 = primaryEmotions.find(e => e.name === name1);
            const emotion2 = primaryEmotions.find(e => e.name === name2);

            const synthesisKey = getSynthesisKey(name1, name2);
            let result;

            if (synthesisKey) {
                result = emotionSynthesis[synthesisKey];
            } else {
                // Генерируем отсутствующую комбинацию
                result = generateMissing(name1, name2);
            }

            displayResult(emotion1, emotion2, result, !!synthesisKey);
        }

        function displayResult(emotion1, emotion2, result, found) {
            const resultsSection = document.getElementById('results');
            const formula = document.getElementById('formula');
            const emoji = document.getElementById('resultEmoji');
            const name = document.getElementById('resultName');
            const definition = document.getElementById('resultDefinition');
            const details = document.getElementById('resultDetails');

            // Формула
            formula.innerHTML = `
                <span class="emotion-tag" style="background: ${emotion1.color}; color: white;">
                    ${emotion1.emoji} ${emotion1.name}
                </span>
                <span style="font-size: 2rem; margin: 0 15px;">+</span>
                <span class="emotion-tag" style="background: ${emotion2.color}; color: white;">
                    ${emotion2.emoji} ${emotion2.name}
                </span>
                <span style="font-size: 2rem; margin: 0 15px;">=</span>
            `;

            // Результат
            emoji.textContent = result.emoji;
            name.textContent = result.name;
            definition.textContent = `"${result.definition}"`;

            // Детали
            let detailsHTML = `
                <div class="detail-section">
                    <h4>💡 Объяснение синтеза</h4>
                    <p>${result.explanation}</p>
                </div>
            `;

            // Механизм (если есть)
            if (result.mechanism) {
                detailsHTML += `
                    <div class="detail-section">
                        <h4>⚙️ Психологический механизм</h4>
                        <p>${result.mechanism}</p>
                    </div>
                `;
            }

            // Когда возникает (если есть)
            if (result.when && result.when.length > 0) {
                detailsHTML += `
                    <div class="detail-section">
                        <h4>🎯 Когда возникает</h4>
                        <ul>
                            ${result.when.map(w => `<li>${w}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            // Физические проявления
            detailsHTML += `
                <div class="detail-section">
                    <h4>🔍 Как распознать</h4>
                    <ul>
                        ${result.symptoms.map(s => `<li>${s}</li>`).join('')}
                    </ul>
                </div>
            `;

            // Физиология (если есть)
            if (result.physiology && result.physiology.length > 0) {
                detailsHTML += `
                    <div class="detail-section">
                        <h4>👁️ Физические признаки</h4>
                        <ul>
                            ${result.physiology.map(p => `<li>${p}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            // Детальные примеры
            const examplesArray = result.detailedExamples || result.examples;
            detailsHTML += `
                <div class="detail-section">
                    <h4>📝 Примеры из жизни</h4>
                    <ul>
                        ${examplesArray.map(e => `<li>${e}</li>`).join('')}
                    </ul>
                </div>
            `;

            // Терапия (если есть расширенная)
            if (result.therapy && result.therapy.length > 0) {
                detailsHTML += `
                    <div class="detail-section">
                        <h4>🧘 Терапевтические практики</h4>
                        <ul>
                            ${result.therapy.map(t => `<li>${t}</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else {
                detailsHTML += `
                    <div class="detail-section">
                        <h4>💪 Рекомендации</h4>
                        <ul>
                            ${result.tips.map(t => `<li>${t}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            // Что помогает/мешает (если есть)
            if (result.helps || result.hinders) {
                detailsHTML += '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">';

                if (result.helps) {
                    detailsHTML += `
                        <div class="detail-section">
                            <h4>✅ Что помогает</h4>
                            <ul>
                                ${result.helps.map(h => `<li>${h}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }

                if (result.hinders) {
                    detailsHTML += `
                        <div class="detail-section">
                            <h4>❌ Что мешает</h4>
                            <ul>
                                ${result.hinders.map(h => `<li>${h}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }

                detailsHTML += '</div>';
            }

            // Культурный контекст (если есть)
            if (result.cultural) {
                detailsHTML += `
                    <div class="detail-section">
                        <h4>🌍 Культурный контекст</h4>
                        <p>${result.cultural}</p>
                    </div>
                `;
            }

            // Цитата (если есть)
            if (result.quote) {
                detailsHTML += `
                    <div class="detail-section" style="font-style: italic; border-left: 3px solid var(--accent); padding-left: 20px; opacity: 0.9;">
                        <p>${result.quote}</p>
                    </div>
                `;
            }

            // Тип комбинации
            detailsHTML += `
                <div class="detail-section">
                    <h4>📊 Тип комбинации</h4>
                    <p>${result.type}</p>
                </div>
            `;

            details.innerHTML = detailsHTML;

            resultsSection.classList.add('show');
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function displayNoSynthesis(emotion1, emotion2) {
            const resultsSection = document.getElementById('results');
            const formula = document.getElementById('formula');
            const emoji = document.getElementById('resultEmoji');
            const name = document.getElementById('resultName');
            const definition = document.getElementById('resultDefinition');
            const details = document.getElementById('resultDetails');

            formula.innerHTML = `
                <span class="emotion-tag" style="background: ${emotion1.color}; color: white;">
                    ${emotion1.emoji} ${emotion1.name}
                </span>
                <span style="font-size: 2rem; margin: 0 15px;">+</span>
                <span class="emotion-tag" style="background: ${emotion2.color}; color: white;">
                    ${emotion2.emoji} ${emotion2.name}
                </span>
                <span style="font-size: 2rem; margin: 0 15px;">=</span>
            `;

            emoji.textContent = '❓';
            name.textContent = 'Комбинация не определена';
            definition.textContent = 'Эта комбинация эмоций не описана в классической теории Плутчика';

            details.innerHTML = `
                <div class="detail-section">
                    <h4>ℹ️ Информация</h4>
                    <p>Роберт Плутчик описал основные комбинации (диады) базовых эмоций, но не все возможные пары имеют устоявшееся название.</p>
                    <p style="margin-top: 15px;">Однако вы можете одновременно испытывать обе эти эмоции:</p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h4>${emotion1.emoji} ${emotion1.name}</h4>
                        <p style="margin: 10px 0;"><em>${emotion1.definition}</em></p>
                        <p><strong>Функция:</strong> ${emotion1.function}</p>
                    </div>
                    <div>
                        <h4>${emotion2.emoji} ${emotion2.name}</h4>
                        <p style="margin: 10px 0;"><em>${emotion2.definition}</em></p>
                        <p><strong>Функция:</strong> ${emotion2.function}</p>
                    </div>
                </div>

                <div class="detail-section" style="margin-top: 20px;">
                    <h4>💭 Возможная интерпретация</h4>
                    <p>Одновременное переживание этих эмоций может создавать сложное эмоциональное состояние, которое требует внимательного осознания обеих составляющих.</p>
                </div>
            `;

            resultsSection.classList.add('show');
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function randomPair() {
            const random1 = primaryEmotions[Math.floor(Math.random() * primaryEmotions.length)];
            let random2;
            do {
                random2 = primaryEmotions[Math.floor(Math.random() * primaryEmotions.length)];
            } while (random2.name === random1.name);

            document.getElementById('emotion1').value = random1.name;
            document.getElementById('emotion2').value = random2.name;

            calculate();
        }

        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            currentTheme = savedTheme;
            document.body.setAttribute('data-theme', currentTheme);
        }

        function switchMode(mode) {
            const directMode = document.getElementById('directMode');
            const reverseMode = document.getElementById('reverseMode');
            const directBtn = document.querySelector('.mode-btn:first-child');
            const reverseBtn = document.querySelector('.mode-btn:last-child');
            const results = document.getElementById('results');
            
            if (mode === 'direct') {
                directMode.style.display = 'block';
                reverseMode.style.display = 'none';
                directBtn.classList.add('active');
                reverseBtn.classList.remove('active');
            } else {
                directMode.style.display = 'none';
                reverseMode.style.display = 'block';
                directBtn.classList.remove('active');
                reverseBtn.classList.add('active');
            }
            
            // Скрываем результаты при переключении
            results.classList.remove('show');
        }

        function decompose() {
            const emotionName = document.getElementById('complexEmotion').value;
            
            if (!emotionName) {
                alert('Пожалуйста, выберите сложную эмоцию');
                return;
            }
            
            const emotion = reverseIndex[emotionName];
            const resultsSection = document.getElementById('results');
            const formula = document.getElementById('formula');
            const emoji = document.getElementById('resultEmoji');
            const name = document.getElementById('resultName');
            const definition = document.getElementById('resultDefinition');
            const details = document.getElementById('resultDetails');
            
            // Формула разложения
            formula.innerHTML = `
                <span class="emotion-tag" style="background: var(--accent); color: white;">
                    ${emotion.emoji} ${emotionName}
                </span>
                <span style="font-size: 2rem; margin: 0 15px;">=</span>
            `;
            
            // Показываем все возможные варианты разложения
            let componentsHTML = '';
            emotion.components.forEach((comp, index) => {
                const [name1, name2] = comp;
                const em1 = primaryEmotions.find(e => e.name === name1);
                const em2 = primaryEmotions.find(e => e.name === name2);
                
                if (index > 0) {
                    componentsHTML += '<div style="text-align: center; margin: 15px 0; font-size: 1.2rem; color: var(--text-secondary);">или</div>';
                }
                
                componentsHTML += `
                    <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin: 10px 0;">
                        <span class="emotion-tag" style="background: ${em1.color}; color: white;">
                            ${em1.emoji} ${em1.name}
                        </span>
                        <span style="font-size: 2rem;">+</span>
                        <span class="emotion-tag" style="background: ${em2.color}; color: white;">
                            ${em2.emoji} ${em2.name}
                        </span>
                    </div>
                `;
            });
            
            formula.innerHTML += componentsHTML;
            
            // Результат
            emoji.textContent = emotion.emoji;
            name.textContent = emotionName;
            definition.textContent = `"${emotion.definition}"`;
            
            // Детали
            let detailsHTML = `
                <div class="detail-section">
                    <h4>💡 Объяснение</h4>
                    <p>${emotion.explanation}</p>
                </div>
                
                <div class="detail-section">
                    <h4>🧩 Базовые компоненты</h4>
            `;
            
            emotion.components.forEach(comp => {
                const [name1, name2] = comp;
                const em1 = primaryEmotions.find(e => e.name === name1);
                const em2 = primaryEmotions.find(e => e.name === name2);

                detailsHTML += `
                    <div style="background: var(--bg-primary); padding: 20px; border-radius: 12px; margin: 15px 0;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <h4 style="color: ${em1.color};">${em1.emoji} ${em1.name}</h4>
                                <p style="margin: 10px 0; font-style: italic;">${em1.definition}</p>
                                <p><strong>Функция:</strong> ${em1.function}</p>
                                ${em1.mechanism ? `<p style="margin-top: 10px;"><strong>Механизм:</strong> ${em1.mechanism}</p>` : ''}
                                ${em1.neurobiology ? `<p style="margin-top: 10px;"><strong>🧠 Нейробиология:</strong> ${em1.neurobiology}</p>` : ''}
                                ${em1.duration ? `<p style="margin-top: 10px;"><strong>⏱️ Длительность:</strong> ${em1.duration}</p>` : ''}
                                ${em1.therapy ? `
                                    <div style="margin-top: 15px;">
                                        <strong>🧘 Терапевтические техники:</strong>
                                        <ul style="margin-top: 5px; padding-left: 20px; font-size: 0.9rem;">
                                            ${em1.therapy.slice(0, 3).map(t => `<li>${t}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                            </div>
                            <div>
                                <h4 style="color: ${em2.color};">${em2.emoji} ${em2.name}</h4>
                                <p style="margin: 10px 0; font-style: italic;">${em2.definition}</p>
                                <p><strong>Функция:</strong> ${em2.function}</p>
                                ${em2.mechanism ? `<p style="margin-top: 10px;"><strong>Механизм:</strong> ${em2.mechanism}</p>` : ''}
                                ${em2.neurobiology ? `<p style="margin-top: 10px;"><strong>🧠 Нейробиология:</strong> ${em2.neurobiology}</p>` : ''}
                                ${em2.duration ? `<p style="margin-top: 10px;"><strong>⏱️ Длительность:</strong> ${em2.duration}</p>` : ''}
                                ${em2.therapy ? `
                                    <div style="margin-top: 15px;">
                                        <strong>🧘 Терапевтические техники:</strong>
                                        <ul style="margin-top: 5px; padding-left: 20px; font-size: 0.9rem;">
                                            ${em2.therapy.slice(0, 3).map(t => `<li>${t}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            detailsHTML += '</div>';
            details.innerHTML = detailsHTML;
            
            resultsSection.classList.add('show');
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Создание анимированных частиц
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';

                // Случайная позиция
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = (Math.random() * 5) + 's';

                // Случайный размер
                const size = Math.random() * 4 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';

                particlesContainer.appendChild(particle);
            }
        }

        function init() {
            populateSelects();
            loadTheme();
            createParticles();
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
